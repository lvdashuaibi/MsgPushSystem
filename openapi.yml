openapi: 3.1.0
info:
  title: MsgMate æ¶ˆæ¯æ¨é€ç³»ç»ŸAPI
  description: |
    MsgMate æ¶ˆæ¯æ¨é€ç³»ç»ŸAPIï¼Œæä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š
    - ğŸ“§ æ¶ˆæ¯å‘é€å’Œæ¨¡æ¿ç®¡ç†
    - ğŸ‘¥ ç”¨æˆ·ç®¡ç†å’Œè”ç³»æ–¹å¼ç®¡ç†
    - ğŸ·ï¸ ç”¨æˆ·æ ‡ç­¾ç®¡ç†å’Œæ‰¹é‡å‘é€
    - â° å®šæ—¶æ¶ˆæ¯å‘é€å’Œè°ƒåº¦
    - ğŸ“Š æ¶ˆæ¯è®°å½•å’Œç»Ÿè®¡åˆ†æ
  version: 2.0.0
servers:
  - url: http://localhost:8109
    description: æœ¬åœ°å¼€å‘æœåŠ¡å™¨
paths:
  /msg/send_msg:
    post:
      summary: å‘é€æ¶ˆæ¯
      description: ä½¿ç”¨æŒ‡å®šæ¨¡æ¿å‘é€æ¶ˆæ¯
      operationId: sendMsg
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendMsgReq'
      responses:
        '200':
          description: æˆåŠŸå‘é€æ¶ˆæ¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SendMsgResp'
  /msg/get_msg_record:
    get:
      summary: è·å–æ¶ˆæ¯è®°å½•
      description: é€šè¿‡æ¶ˆæ¯IDè·å–æ¶ˆæ¯è®°å½•
      operationId: getMsgRecord
      parameters:
        - name: msgID
          in: query
          description: æ¶ˆæ¯ID
          required: true
          schema:
            type: string
      responses:
        '200':
          description: æˆåŠŸè·å–æ¶ˆæ¯è®°å½•
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetMsgRecordResp'
  /msg/create_template:
    post:
      summary: åˆ›å»ºæ¶ˆæ¯æ¨¡æ¿
      description: åˆ›å»ºä¸€ä¸ªæ–°çš„æ¶ˆæ¯æ¨¡æ¿
      operationId: createTemplate
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTemplateReq'
      responses:
        '200':
          description: æˆåŠŸåˆ›å»ºæ¨¡æ¿
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateTemplateResp'
  /msg/get_template:
    get:
      summary: è·å–æ¨¡æ¿ä¿¡æ¯
      description: é€šè¿‡æ¨¡æ¿IDè·å–æ¨¡æ¿è¯¦ç»†ä¿¡æ¯
      operationId: getTemplate
      parameters:
        - name: templateID
          in: query
          description: æ¨¡æ¿ID
          required: true
          schema:
            type: string
      responses:
        '200':
          description: æˆåŠŸè·å–æ¨¡æ¿ä¿¡æ¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetTemplateResp'
  /msg/update_template:
    post:
      summary: æ›´æ–°æ¨¡æ¿
      description: æ›´æ–°æŒ‡å®šæ¨¡æ¿çš„ä¿¡æ¯
      operationId: updateTemplate
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTemplateReq'
      responses:
        '200':
          description: æˆåŠŸæ›´æ–°æ¨¡æ¿
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateTemplateResp'
  /msg/del_template:
    post:
      summary: åˆ é™¤æ¨¡æ¿
      description: åˆ é™¤æŒ‡å®šçš„æ¨¡æ¿
      operationId: delTemplate
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DelTemplateReq'
      responses:
        '200':
          description: æˆåŠŸåˆ é™¤æ¨¡æ¿
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DelTemplateResp'

  # ç”¨æˆ·ç®¡ç†API
  /user/create:
    post:
      summary: åˆ›å»ºç”¨æˆ·
      description: åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·ï¼Œæ”¯æŒå¤šç§è”ç³»æ–¹å¼å’Œæ ‡ç­¾
      operationId: createUser
      tags:
        - ç”¨æˆ·ç®¡ç†
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUserReq'
      responses:
        '200':
          description: æˆåŠŸåˆ›å»ºç”¨æˆ·
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateUserResp'

  /user/get:
    get:
      summary: è·å–ç”¨æˆ·ä¿¡æ¯
      description: é€šè¿‡ç”¨æˆ·IDè·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯
      operationId: getUser
      tags:
        - ç”¨æˆ·ç®¡ç†
      parameters:
        - name: user_id
          in: query
          description: ç”¨æˆ·å”¯ä¸€æ ‡è¯†
          required: true
          schema:
            type: string
      responses:
        '200':
          description: æˆåŠŸè·å–ç”¨æˆ·ä¿¡æ¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetUserResp'

  /user/update:
    post:
      summary: æ›´æ–°ç”¨æˆ·ä¿¡æ¯
      description: æ›´æ–°ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ã€è”ç³»æ–¹å¼æˆ–æ ‡ç­¾
      operationId: updateUser
      tags:
        - ç”¨æˆ·ç®¡ç†
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserReq'
      responses:
        '200':
          description: æˆåŠŸæ›´æ–°ç”¨æˆ·ä¿¡æ¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateUserResp'

  /user/list:
    get:
      summary: è·å–ç”¨æˆ·åˆ—è¡¨
      description: åˆ†é¡µè·å–ç”¨æˆ·åˆ—è¡¨
      operationId: listUsers
      tags:
        - ç”¨æˆ·ç®¡ç†
      parameters:
        - name: page
          in: query
          description: é¡µç ï¼Œä»1å¼€å§‹
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: page_size
          in: query
          description: æ¯é¡µæ•°é‡
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
      responses:
        '200':
          description: æˆåŠŸè·å–ç”¨æˆ·åˆ—è¡¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListUsersResp'

  /user/delete:
    post:
      summary: åˆ é™¤ç”¨æˆ·
      description: åˆ é™¤æŒ‡å®šç”¨æˆ·ï¼ˆè½¯åˆ é™¤ï¼‰
      operationId: deleteUser
      tags:
        - ç”¨æˆ·ç®¡ç†
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteUserReq'
      responses:
        '200':
          description: æˆåŠŸåˆ é™¤ç”¨æˆ·
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteUserResp'

  /user/find_by_tags:
    post:
      summary: æŒ‰æ ‡ç­¾æŸ¥æ‰¾ç”¨æˆ·
      description: æ ¹æ®æ ‡ç­¾æŸ¥æ‰¾ç”¨æˆ·ï¼Œæ”¯æŒç²¾ç¡®åŒ¹é…å’Œæ¨¡ç³ŠåŒ¹é…
      operationId: findUsersByTags
      tags:
        - ç”¨æˆ·ç®¡ç†
        - æ ‡ç­¾ç®¡ç†
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FindUsersByTagsReq'
      responses:
        '200':
          description: æˆåŠŸæŸ¥æ‰¾ç”¨æˆ·
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindUsersByTagsResp'

  /user/tag_statistics:
    get:
      summary: è·å–æ ‡ç­¾ç»Ÿè®¡
      description: è·å–æ‰€æœ‰æ ‡ç­¾çš„ä½¿ç”¨ç»Ÿè®¡ä¿¡æ¯
      operationId: getTagStatistics
      tags:
        - æ ‡ç­¾ç®¡ç†
      responses:
        '200':
          description: æˆåŠŸè·å–æ ‡ç­¾ç»Ÿè®¡
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetTagStatisticsResp'

  # å®šæ—¶æ¶ˆæ¯API
  /scheduled/create:
    post:
      summary: åˆ›å»ºå®šæ—¶æ¶ˆæ¯
      description: åˆ›å»ºä¸€ä¸ªå®šæ—¶å‘é€çš„æ¶ˆæ¯ä»»åŠ¡
      operationId: createScheduledMessage
      tags:
        - å®šæ—¶æ¶ˆæ¯
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateScheduledMessageReq'
      responses:
        '200':
          description: æˆåŠŸåˆ›å»ºå®šæ—¶æ¶ˆæ¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateScheduledMessageResp'

  /scheduled/get:
    get:
      summary: è·å–å®šæ—¶æ¶ˆæ¯
      description: é€šè¿‡è°ƒåº¦IDè·å–å®šæ—¶æ¶ˆæ¯è¯¦æƒ…
      operationId: getScheduledMessage
      tags:
        - å®šæ—¶æ¶ˆæ¯
      parameters:
        - name: schedule_id
          in: query
          description: å®šæ—¶æ¶ˆæ¯è°ƒåº¦ID
          required: true
          schema:
            type: string
      responses:
        '200':
          description: æˆåŠŸè·å–å®šæ—¶æ¶ˆæ¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetScheduledMessageResp'

  /scheduled/list:
    get:
      summary: è·å–å®šæ—¶æ¶ˆæ¯åˆ—è¡¨
      description: åˆ†é¡µè·å–å®šæ—¶æ¶ˆæ¯åˆ—è¡¨
      operationId: listScheduledMessages
      tags:
        - å®šæ—¶æ¶ˆæ¯
      parameters:
        - name: page
          in: query
          description: é¡µç ï¼Œä»1å¼€å§‹
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: page_size
          in: query
          description: æ¯é¡µæ•°é‡
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
        - name: status
          in: query
          description: æ¶ˆæ¯çŠ¶æ€è¿‡æ»¤
          required: false
          schema:
            type: integer
            enum: [1, 2, 3, 4]
            description: 1-å¾…å‘é€ï¼Œ2-å·²å‘é€ï¼Œ3-å·²å–æ¶ˆï¼Œ4-å‘é€å¤±è´¥
      responses:
        '200':
          description: æˆåŠŸè·å–å®šæ—¶æ¶ˆæ¯åˆ—è¡¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListScheduledMessagesResp'

  /scheduled/cancel:
    post:
      summary: å–æ¶ˆå®šæ—¶æ¶ˆæ¯
      description: å–æ¶ˆæŒ‡å®šçš„å®šæ—¶æ¶ˆæ¯
      operationId: cancelScheduledMessage
      tags:
        - å®šæ—¶æ¶ˆæ¯
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CancelScheduledMessageReq'
      responses:
        '200':
          description: æˆåŠŸå–æ¶ˆå®šæ—¶æ¶ˆæ¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CancelScheduledMessageResp'

components:
  schemas:
    RespComm:
      type: object
      description: é€šç”¨å“åº”ç»“æ„
      properties:
        code:
          type: integer
          description: å“åº”çŠ¶æ€ç ï¼Œ0è¡¨ç¤ºæˆåŠŸ
        msg:
          type: string
          description: å“åº”æ¶ˆæ¯
    SendMsgReq:
      type: object
      description: å‘é€æ¶ˆæ¯è¯·æ±‚
      required:
        - to
        - templateID
        - templateData
      properties:
        to:
          type: string
          description: æ¥æ”¶è€…
        subject:
          type: string
          description: æ¶ˆæ¯ä¸»é¢˜
        priority:
          type: integer
          description: æ¶ˆæ¯ä¼˜å…ˆçº§
        templateID:
          type: string
          description: æ¨¡æ¿ID
        templateData:
          type: object
          additionalProperties:
            type: string
          description: æ¨¡æ¿æ•°æ®ï¼Œç”¨äºå¡«å……æ¨¡æ¿å†…å®¹
        sendTimestamp:
          type: integer
          format: int64
          description: å‘é€æ—¶é—´æˆ³
    SendMsgResp:
      type: object
      description: å‘é€æ¶ˆæ¯å“åº”
      allOf:
        - $ref: '#/components/schemas/RespComm'
        - type: object
          properties:
            msgID:
              type: string
              description: æ¶ˆæ¯ID
    GetMsgRecordReq:
      type: object
      description: è·å–æ¶ˆæ¯è®°å½•è¯·æ±‚
      required:
        - msgID
      properties:
        msgID:
          type: string
          description: æ¶ˆæ¯ID
    GetMsgRecordResp:
      type: object
      description: è·å–æ¶ˆæ¯è®°å½•å“åº”
      allOf:
        - $ref: '#/components/schemas/RespComm'
        - type: object
          properties:
            to:
              type: string
              description: æ¥æ”¶è€…
            subject:
              type: string
              description: æ¶ˆæ¯ä¸»é¢˜
            templateID:
              type: string
              description: æ¨¡æ¿ID
            templateData:
              type: object
              additionalProperties:
                type: string
              description: æ¨¡æ¿æ•°æ®
    CreateTemplateReq:
      type: object
      description: åˆ›å»ºæ¨¡æ¿è¯·æ±‚
      required:
        - sourceID
        - name
        - channel
        - content
      properties:
        sourceID:
          type: string
          description: æºID
        name:
          type: string
          description: æ¨¡æ¿åç§°
        subject:
          type: string
          description: ä¸»é¢˜
        signName:
          type: string
          description: ç­¾ååç§°
        channel:
          type: integer
          description: æ¸ é“
        content:
          type: string
          description: æ¨¡æ¿å†…å®¹
    CreateTemplateResp:
      type: object
      description: åˆ›å»ºæ¨¡æ¿å“åº”
      allOf:
        - $ref: '#/components/schemas/RespComm'
        - type: object
          properties:
            templateID:
              type: string
              description: æ¨¡æ¿ID
    GetTemplateReq:
      type: object
      description: è·å–æ¨¡æ¿è¯·æ±‚
      required:
        - templateID
      properties:
        templateID:
          type: string
          description: æ¨¡æ¿ID
    GetTemplateResp:
      type: object
      description: è·å–æ¨¡æ¿å“åº”
      allOf:
        - $ref: '#/components/schemas/RespComm'
        - type: object
          properties:
            relTemplateID:
              type: string
              description: å…³è”æ¨¡æ¿ID
            sourceID:
              type: string
              description: æºID
            signName:
              type: string
              description: ç­¾ååç§°
            name:
              type: string
              description: æ¨¡æ¿åç§°
            subject:
              type: string
              description: ä¸»é¢˜
            channel:
              type: integer
              description: æ¸ é“
            content:
              type: string
              description: æ¨¡æ¿å†…å®¹
    UpdateTemplateReq:
      type: object
      description: æ›´æ–°æ¨¡æ¿è¯·æ±‚
      required:
        - templateID
      properties:
        templateID:
          type: string
          description: æ¨¡æ¿ID
        name:
          type: string
          description: æ¨¡æ¿åç§°
        sourceID:
          type: string
          description: æºID
        subject:
          type: string
          description: ä¸»é¢˜
        channel:
          type: integer
          description: æ¸ é“
        content:
          type: string
          description: æ¨¡æ¿å†…å®¹
    UpdateTemplateResp:
      type: object
      description: æ›´æ–°æ¨¡æ¿å“åº”
      allOf:
        - $ref: '#/components/schemas/RespComm'
    DelTemplateReq:
      type: object
      description: åˆ é™¤æ¨¡æ¿è¯·æ±‚
      required:
        - templateID
      properties:
        templateID:
          type: string
          description: æ¨¡æ¿ID
    DelTemplateResp:
      type: object
      description: åˆ é™¤æ¨¡æ¿å“åº”
      allOf:
        - $ref: '#/components/schemas/RespComm'
    # ç”¨æˆ·ç®¡ç†ç›¸å…³Schema
    User:
      type: object
      description: ç”¨æˆ·ä¿¡æ¯
      properties:
        id:
          type: integer
          format: int64
          description: æ•°æ®åº“è‡ªå¢ID
        user_id:
          type: string
          description: ç”¨æˆ·å”¯ä¸€æ ‡è¯†
        name:
          type: string
          description: ç”¨æˆ·å§“å
        nickname:
          type: string
          description: ç”¨æˆ·æ˜µç§°
        mobile:
          type: string
          description: æ‰‹æœºå·
        email:
          type: string
          description: é‚®ç®±åœ°å€
        lark_id:
          type: string
          description: é£ä¹¦ç”¨æˆ·ID
        tags:
          type: array
          items:
            type: string
          description: ç”¨æˆ·æ ‡ç­¾åˆ—è¡¨
        status:
          type: integer
          description: ç”¨æˆ·çŠ¶æ€ï¼Œ1-å¯ç”¨ï¼Œ0-ç¦ç”¨
        create_time:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        modify_time:
          type: string
          format: date-time
          description: ä¿®æ”¹æ—¶é—´

    CreateUserReq:
      type: object
      description: åˆ›å»ºç”¨æˆ·è¯·æ±‚
      required:
        - user_id
        - name
      properties:
        user_id:
          type: string
          description: ç”¨æˆ·å”¯ä¸€æ ‡è¯†
          example: "user_001"
        name:
          type: string
          description: ç”¨æˆ·å§“å
          example: "å¼ ä¸‰"
        nickname:
          type: string
          description: ç”¨æˆ·æ˜µç§°
          example: "å°å¼ "
        mobile:
          type: string
          description: æ‰‹æœºå·
          example: "13800138000"
        email:
          type: string
          format: email
          description: é‚®ç®±åœ°å€
          example: "zhangsan@example.com"
        lark_id:
          type: string
          description: é£ä¹¦ç”¨æˆ·ID
          example: "lark_user_001"
        tags:
          type: array
          items:
            type: string
          description: ç”¨æˆ·æ ‡ç­¾åˆ—è¡¨
          example: ["æœ‹å‹", "åŒäº‹"]

    CreateUserResp:
      type: object
      description: åˆ›å»ºç”¨æˆ·å“åº”
      allOf:
        - $ref: '#/components/schemas/RespComm'
        - type: object
          properties:
            user_id:
              type: string
              description: åˆ›å»ºçš„ç”¨æˆ·ID

    GetUserResp:
      type: object
      description: è·å–ç”¨æˆ·ä¿¡æ¯å“åº”
      allOf:
        - $ref: '#/components/schemas/RespComm'
        - type: object
          properties:
            user:
              $ref: '#/components/schemas/User'

    UpdateUserReq:
      type: object
      description: æ›´æ–°ç”¨æˆ·ä¿¡æ¯è¯·æ±‚
      required:
        - user_id
      properties:
        user_id:
          type: string
          description: ç”¨æˆ·å”¯ä¸€æ ‡è¯†
        name:
          type: string
          description: ç”¨æˆ·å§“å
        nickname:
          type: string
          description: ç”¨æˆ·æ˜µç§°
        mobile:
          type: string
          description: æ‰‹æœºå·
        email:
          type: string
          format: email
          description: é‚®ç®±åœ°å€
        lark_id:
          type: string
          description: é£ä¹¦ç”¨æˆ·ID
        tags:
          type: array
          items:
            type: string
          description: ç”¨æˆ·æ ‡ç­¾åˆ—è¡¨
        status:
          type: integer
          description: ç”¨æˆ·çŠ¶æ€ï¼Œ1-å¯ç”¨ï¼Œ0-ç¦ç”¨

    UpdateUserResp:
      type: object
      description: æ›´æ–°ç”¨æˆ·ä¿¡æ¯å“åº”
      allOf:
        - $ref: '#/components/schemas/RespComm'

    ListUsersResp:
      type: object
      description: ç”¨æˆ·åˆ—è¡¨å“åº”
      allOf:
        - $ref: '#/components/schemas/RespComm'
        - type: object
          properties:
            users:
              type: array
              items:
                $ref: '#/components/schemas/User'
              description: ç”¨æˆ·åˆ—è¡¨
            total:
              type: integer
              format: int64
              description: æ€»æ•°é‡
            page:
              type: integer
              description: å½“å‰é¡µç 

    DeleteUserReq:
      type: object
      description: åˆ é™¤ç”¨æˆ·è¯·æ±‚
      required:
        - user_id
      properties:
        user_id:
          type: string
          description: ç”¨æˆ·å”¯ä¸€æ ‡è¯†

    DeleteUserResp:
      type: object
      description: åˆ é™¤ç”¨æˆ·å“åº”
      allOf:
        - $ref: '#/components/schemas/RespComm'

    FindUsersByTagsReq:
      type: object
      description: æŒ‰æ ‡ç­¾æŸ¥æ‰¾ç”¨æˆ·è¯·æ±‚
      required:
        - tags
      properties:
        tags:
          type: array
          items:
            type: string
          description: æ ‡ç­¾åˆ—è¡¨
          example: ["æœ‹å‹", "åŒäº‹"]
        match_type:
          type: string
          enum: ["any", "all"]
          default: "any"
          description: åŒ¹é…ç±»å‹ï¼Œany-ä»»æ„åŒ¹é…ï¼Œall-å…¨éƒ¨åŒ¹é…
        page:
          type: integer
          minimum: 1
          default: 1
          description: é¡µç 
        page_size:
          type: integer
          minimum: 1
          maximum: 100
          default: 10
          description: æ¯é¡µæ•°é‡

    FindUsersByTagsResp:
      type: object
      description: æŒ‰æ ‡ç­¾æŸ¥æ‰¾ç”¨æˆ·å“åº”
      allOf:
        - $ref: '#/components/schemas/RespComm'
        - type: object
          properties:
            users:
              type: array
              items:
                $ref: '#/components/schemas/User'
              description: åŒ¹é…çš„ç”¨æˆ·åˆ—è¡¨
            total:
              type: integer
              format: int64
              description: æ€»æ•°é‡
            page:
              type: integer
              description: å½“å‰é¡µç 

    TagStatistic:
      type: object
      description: æ ‡ç­¾ç»Ÿè®¡ä¿¡æ¯
      properties:
        tag:
          type: string
          description: æ ‡ç­¾åç§°
        count:
          type: integer
          format: int64
          description: ä½¿ç”¨è¯¥æ ‡ç­¾çš„ç”¨æˆ·æ•°é‡

    GetTagStatisticsResp:
      type: object
      description: æ ‡ç­¾ç»Ÿè®¡å“åº”
      allOf:
        - $ref: '#/components/schemas/RespComm'
        - type: object
          properties:
            statistics:
              type: array
              items:
                $ref: '#/components/schemas/TagStatistic'
              description: æ ‡ç­¾ç»Ÿè®¡åˆ—è¡¨

    # å®šæ—¶æ¶ˆæ¯ç›¸å…³Schema
    ScheduledMessage:
      type: object
      description: å®šæ—¶æ¶ˆæ¯ä¿¡æ¯
      properties:
        id:
          type: integer
          format: int64
          description: æ•°æ®åº“è‡ªå¢ID
        schedule_id:
          type: string
          description: å®šæ—¶æ¶ˆæ¯å”¯ä¸€æ ‡è¯†
        user_ids:
          type: array
          items:
            type: string
          description: ç›®æ ‡ç”¨æˆ·IDåˆ—è¡¨
        tags:
          type: array
          items:
            type: string
          description: ç›®æ ‡æ ‡ç­¾åˆ—è¡¨
        template_id:
          type: string
          description: æ¶ˆæ¯æ¨¡æ¿ID
        template_data:
          type: string
          description: æ¨¡æ¿æ•°æ®ï¼ˆJSONæ ¼å¼ï¼‰
        scheduled_time:
          type: string
          format: date-time
          description: è®¡åˆ’å‘é€æ—¶é—´
        status:
          type: integer
          description: çŠ¶æ€ï¼Œ1-å¾…å‘é€ï¼Œ2-å·²å‘é€ï¼Œ3-å·²å–æ¶ˆï¼Œ4-å‘é€å¤±è´¥
        actual_send_time:
          type: string
          format: date-time
          description: å®é™…å‘é€æ—¶é—´
        create_time:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        modify_time:
          type: string
          format: date-time
          description: ä¿®æ”¹æ—¶é—´

    CreateScheduledMessageReq:
      type: object
      description: åˆ›å»ºå®šæ—¶æ¶ˆæ¯è¯·æ±‚
      required:
        - template_id
        - scheduled_time
      properties:
        user_ids:
          type: array
          items:
            type: string
          description: ç›®æ ‡ç”¨æˆ·IDåˆ—è¡¨
          example: ["user_001", "user_002"]
        tags:
          type: array
          items:
            type: string
          description: ç›®æ ‡æ ‡ç­¾åˆ—è¡¨
          example: ["æœ‹å‹", "åŒäº‹"]
        template_id:
          type: string
          description: æ¶ˆæ¯æ¨¡æ¿ID
          example: "template_001"
        template_data:
          type: object
          additionalProperties:
            type: string
          description: æ¨¡æ¿æ•°æ®ï¼Œç”¨äºå¡«å……æ¨¡æ¿å†…å®¹
          example:
            name: "å¼ ä¸‰"
            code: "123456"
        scheduled_time:
          type: string
          format: date-time
          description: è®¡åˆ’å‘é€æ—¶é—´ï¼Œæ ¼å¼ï¼šYYYY-MM-DD HH:mm:ss
          example: "2025-09-12 15:30:00"

    CreateScheduledMessageResp:
      type: object
      description: åˆ›å»ºå®šæ—¶æ¶ˆæ¯å“åº”
      allOf:
        - $ref: '#/components/schemas/RespComm'
        - type: object
          properties:
            schedule_id:
              type: string
              description: å®šæ—¶æ¶ˆæ¯è°ƒåº¦ID

    GetScheduledMessageResp:
      type: object
      description: è·å–å®šæ—¶æ¶ˆæ¯å“åº”
      allOf:
        - $ref: '#/components/schemas/RespComm'
        - type: object
          properties:
            message:
              $ref: '#/components/schemas/ScheduledMessage'

    ListScheduledMessagesResp:
      type: object
      description: å®šæ—¶æ¶ˆæ¯åˆ—è¡¨å“åº”
      allOf:
        - $ref: '#/components/schemas/RespComm'
        - type: object
          properties:
            messages:
              type: array
              items:
                $ref: '#/components/schemas/ScheduledMessage'
              description: å®šæ—¶æ¶ˆæ¯åˆ—è¡¨
            total:
              type: integer
              format: int64
              description: æ€»æ•°é‡
            page:
              type: integer
              description: å½“å‰é¡µç 

    CancelScheduledMessageReq:
      type: object
      description: å–æ¶ˆå®šæ—¶æ¶ˆæ¯è¯·æ±‚
      required:
        - schedule_id
      properties:
        schedule_id:
          type: string
          description: å®šæ—¶æ¶ˆæ¯è°ƒåº¦ID

    CancelScheduledMessageResp:
      type: object
      description: å–æ¶ˆå®šæ—¶æ¶ˆæ¯å“åº”
      allOf:
        - $ref: '#/components/schemas/RespComm'
